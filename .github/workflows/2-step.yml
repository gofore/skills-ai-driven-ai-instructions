name: Step 2
on: [push]

jobs:
  check-rules:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Validate AI Instruction File
        run: |
          # 1. Check if all required files exist
          MISSING_FILES=()
          [ ! -f "CLAUDE.md" ] && MISSING_FILES+=("CLAUDE.md")
          [ ! -f "AGENTS.md" ] && MISSING_FILES+=("AGENTS.md")
          [ ! -f ".github/copilot-instructions.md" ] && MISSING_FILES+=(".github/copilot-instructions.md")

          if [ ${#MISSING_FILES[@]} -ne 0 ]; then
            echo "::error::Missing required AI instruction files: ${MISSING_FILES[*]}"
            exit 1
          fi

          echo "Success! You now support multiple LLMs."

      - name: Disable current workflow and enable next one
        run: |
          gh workflow disable "${{github.workflow}}"
          gh workflow enable "Step 2"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
